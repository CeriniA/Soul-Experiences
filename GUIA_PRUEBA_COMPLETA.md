# üß™ GU√çA DE PRUEBA COMPLETA DEL SISTEMA

## üìã Objetivo
Probar todo el flujo del sistema desde cero: crear retiro, recibir leads, gestionar estados, generar tokens y testimonios.

---

## üöÄ PASO 1: Limpiar y Poblar la Base de Datos

### 1.1 Limpiar BD
```bash
cd backend
node scripts/cleanDatabase.js
```

**Resultado esperado**:
```
‚úÖ Retiros: X documento(s) eliminado(s)
‚úÖ Leads: X documento(s) eliminado(s)
‚úÖ Testimonios: X documento(s) eliminado(s)
‚úÖ Tokens: X documento(s) eliminado(s)
‚úÖ Configuraci√≥n: X documento(s) eliminado(s)
‚ÑπÔ∏è  Usuarios: 1 (no se eliminan)
```

### 1.2 Poblar BD con Retiro Completo
```bash
node scripts/seedDatabase.js
```

**Resultado esperado**:
```
‚úÖ Configuraci√≥n creada
‚úÖ Retiro creado exitosamente

üìä RESUMEN:
   ‚Ä¢ Retiro: "Retiro de A√±o Nuevo 2026 - Celebraci√≥n Consciente"
   ‚Ä¢ Fechas: 29/12/2025 - 02/01/2026
   ‚Ä¢ Precio: $1.111.111 ARS
   ‚Ä¢ Capacidad: 24 personas
   ‚Ä¢ Estado: active
```

---

## üåê PASO 2: Verificar Frontend (Landing Page)

### 2.1 Iniciar Servidores

**Terminal 1 - Backend**:
```bash
cd backend
npm run dev
```

**Terminal 2 - Frontend**:
```bash
cd frontend
npm run dev
```

### 2.2 Abrir Landing Page
- URL: `http://localhost:5173` o `http://localhost:3000`

### 2.3 Verificaciones Visuales

‚úÖ **Hero Section**:
- [ ] Aparece el retiro "A√ëO NUEVO 2026"
- [ ] Se ven las fechas: 29 dic 2025 - 2 ene 2026
- [ ] Se muestra el precio: $1.111.111
- [ ] Aparece "24 lugares disponibles"
- [ ] Palabras resaltadas: "A√ëO NUEVO", "2026", "CELEBRACI√ìN CONSCIENTE"

‚úÖ **Secci√≥n Retiros**:
- [ ] Card del retiro visible
- [ ] Informaci√≥n completa
- [ ] Bot√≥n "Reservar Mi Plaza"

‚úÖ **Secci√≥n Testimonios**:
- [ ] Aparece vac√≠a (a√∫n no hay testimonios)

‚úÖ **Secci√≥n Contacto**:
- [ ] Email: holasoul.experiences@gmail.com
- [ ] WhatsApp visible
- [ ] Botones funcionando

---

## üë§ PASO 3: Crear Lead (Simular Usuario Interesado)

### 3.1 Completar Formulario de Contacto

**Ir a la secci√≥n "Contacto"** o hacer clic en "Reservar Mi Plaza"

**Datos de prueba**:
```
Nombre: Mar√≠a Gonz√°lez
Email: maria.gonzalez@email.com
Tel√©fono: +54 9 351 123 4567
Mensaje: Hola! Me interesa mucho el retiro de A√±o Nuevo. 
         Quisiera saber si hay lugares disponibles y 
         las opciones de pago. Gracias!
```

### 3.2 Enviar Formulario

**Resultado esperado**:
- ‚úÖ Mensaje de confirmaci√≥n
- ‚úÖ "Gracias por tu inter√©s. Te contactaremos pronto."

---

## üîê PASO 4: Gestionar Lead en Admin Panel

### 4.1 Login al Admin Panel

- URL: `http://localhost:5173/admin/login`

**Credenciales** (si ya tienes usuario):
```
Email: tu_email@admin.com
Password: tu_password
```

**Si no tienes usuario**, crear uno:
```bash
# En Postman o Thunder Client
POST http://localhost:5000/api/auth/create-admin
Content-Type: application/json

{
  "name": "Admin Soul",
  "email": "admin@soul.com",
  "password": "admin123"
}
```

### 4.2 Ver el Lead Creado

**Navegar a**: Admin Panel ‚Üí Leads

**Verificar**:
- [ ] Aparece "Mar√≠a Gonz√°lez"
- [ ] Email: maria.gonzalez@email.com
- [ ] Estado: "nuevo" (badge amarillo)
- [ ] Pago: "pendiente"
- [ ] Retiro: "Retiro de A√±o Nuevo 2026"

### 4.3 Actualizar Estado del Lead

**Hacer clic en el lead** ‚Üí Se abre el detalle

**Cambios a realizar**:

#### Paso 1: Contactar
```
Estado: nuevo ‚Üí contactado
Notas: "Contactada por WhatsApp. Muy interesada. 
        Pregunt√≥ por opciones de pago."
```
- [ ] Guardar cambios
- [ ] Badge cambia a azul

#### Paso 2: Confirmar Inter√©s
```
Estado: contactado ‚Üí interesado
Pago: pendiente ‚Üí se√±a
Monto: 333333 (30% de se√±a)
M√©todo: transferencia
Notas: "Envi√≥ se√±a del 30%. Confirm√≥ asistencia."
```
- [ ] Guardar cambios
- [ ] Badge cambia a verde claro

#### Paso 3: Confirmar Pago Completo
```
Estado: interesado ‚Üí confirmado
Pago: se√±a ‚Üí completo
Monto: 1111111 (total)
Notas: "Pago completo recibido. Plaza confirmada."
```
- [ ] Guardar cambios
- [ ] Badge cambia a verde oscuro
- [ ] **IMPORTANTE**: Ahora cuenta como participante confirmado

### 4.4 Verificar Disponibilidad del Retiro

**Navegar a**: Admin Panel ‚Üí Retiros ‚Üí "A√±o Nuevo 2026"

**Verificar**:
- [ ] Participantes Actuales: 1
- [ ] Lugares Disponibles: 23
- [ ] Progreso: 1/24

---

## üé´ PASO 5: Generar Token de Testimonio

### 5.1 Crear M√°s Leads Confirmados (Opcional)

Para probar tokens m√∫ltiples, crea 2-3 leads m√°s y conf√≠rmalos:

**Lead 2**:
```
Nombre: Juan P√©rez
Email: juan.perez@email.com
Estado: confirmado
Pago: completo
```

**Lead 3**:
```
Nombre: Laura Mart√≠nez
Email: laura.martinez@email.com
Estado: confirmado
Pago: completo
```

### 5.2 Generar Tokens

**Navegar a**: Admin Panel ‚Üí Tokens ‚Üí "Generar Tokens"

**Seleccionar**:
- Retiro: "Retiro de A√±o Nuevo 2026"
- Cantidad: (dejar vac√≠o para todos los confirmados)

**Hacer clic en**: "Generar Tokens"

**Resultado esperado**:
```
‚úÖ 3 token(es) generado(s) exitosamente
üìß Emails enviados: 3
   ‚Ä¢ maria.gonzalez@email.com ‚úÖ
   ‚Ä¢ juan.perez@email.com ‚úÖ
   ‚Ä¢ laura.martinez@email.com ‚úÖ
```

### 5.3 Ver Tokens Generados

**Navegar a**: Admin Panel ‚Üí Tokens

**Verificar**:
- [ ] Aparecen 3 tokens
- [ ] Estado: "No usado"
- [ ] Email de cada participante
- [ ] Fecha de expiraci√≥n (30 d√≠as)

---

## üí¨ PASO 6: Enviar Testimonio (Simular Participante)

### 6.1 Obtener Token

**En Admin Panel ‚Üí Tokens**:
- Copiar el token de "Mar√≠a Gonz√°lez"
- Ejemplo: `a1b2c3d4e5f6...`

### 6.2 Abrir Formulario de Testimonio

**URL**: `http://localhost:5173/testimonial/:token`

Reemplazar `:token` con el token copiado.

**Ejemplo**:
```
http://localhost:5173/testimonial/a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
```

### 6.3 Completar Formulario de Testimonio

**Datos de prueba**:
```
Calificaci√≥n: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 estrellas)

Comentario:
"Una experiencia transformadora que super√≥ todas mis expectativas. 
El retiro de A√±o Nuevo fue exactamente lo que necesitaba para cerrar 
ciclos y comenzar el 2026 desde un lugar de paz y consciencia. 

Las ceremonias fueron profundas, la comida deliciosa, y el grupo 
humano incre√≠ble. Clarisa es una facilitadora excepcional que crea 
un espacio seguro para la transformaci√≥n. 

Recomiendo 100% esta experiencia a cualquiera que busque reconectarse 
consigo mismo. ¬°Gracias Soul Experiences!"

Foto: (opcional, subir una imagen)
```

### 6.4 Enviar Testimonio

**Hacer clic en**: "Enviar Testimonio"

**Resultado esperado**:
- ‚úÖ Mensaje de confirmaci√≥n
- ‚úÖ "Testimonio enviado exitosamente. Ser√° revisado antes de publicarse."

---

## ‚úÖ PASO 7: Aprobar Testimonio (Admin)

### 7.1 Ver Testimonio Pendiente

**Navegar a**: Admin Panel ‚Üí Testimonios

**Verificar**:
- [ ] Aparece testimonio de "Mar√≠a Gonz√°lez"
- [ ] Estado: "Pendiente" (badge amarillo)
- [ ] Rating: 5 estrellas
- [ ] Comentario completo visible

### 7.2 Aprobar y Destacar

**Hacer clic en el testimonio** ‚Üí Detalle

**Cambios**:
```
Aprobado: ‚úÖ S√≠
Destacado: ‚úÖ S√≠ (para que aparezca en landing)
Notas: "Testimonio excelente. Destacar en landing."
```

**Guardar cambios**

### 7.3 Verificar en Landing Page

**Volver a**: `http://localhost:5173`

**Scroll hasta**: Secci√≥n "Testimonios"

**Verificar**:
- [ ] Aparece testimonio de Mar√≠a Gonz√°lez
- [ ] 5 estrellas visibles
- [ ] Comentario completo
- [ ] Nombre del retiro: "Retiro de A√±o Nuevo 2026"

---

## üéØ PASO 8: Verificar Token Usado

### 8.1 Ver Token en Admin

**Navegar a**: Admin Panel ‚Üí Tokens

**Verificar token de Mar√≠a**:
- [ ] Estado: "Usado" (badge verde)
- [ ] Fecha de uso visible
- [ ] Link al testimonio creado

### 8.2 Intentar Usar Token Nuevamente

**Abrir nuevamente**: `http://localhost:5173/testimonial/:token`

**Resultado esperado**:
- ‚ùå Error: "Token inv√°lido, expirado o ya utilizado"
- No permite enviar otro testimonio

---

## üìä PASO 9: Verificar Estad√≠sticas

### 9.1 Dashboard de Leads

**Navegar a**: Admin Panel ‚Üí Leads ‚Üí Stats

**Verificar**:
- [ ] Total de leads: 3
- [ ] Confirmados: 3
- [ ] Tasa de conversi√≥n: 100%
- [ ] Gr√°ficos actualizados

### 9.2 Dashboard de Retiros

**Navegar a**: Admin Panel ‚Üí Retiros ‚Üí "A√±o Nuevo 2026"

**Verificar**:
- [ ] Participantes: 3/24
- [ ] Disponibilidad: 21 lugares
- [ ] Progreso: 12.5%
- [ ] Ingresos estimados: $3.333.333

---

## üßπ PASO 10: Probar Eliminaci√≥n y Actualizaci√≥n

### 10.1 Descartar un Lead

**Crear un nuevo lead** (desde landing):
```
Nombre: Pedro Descartado
Email: pedro@email.com
```

**En Admin Panel**:
- Cambiar estado a: "descartado"
- Notas: "No respondi√≥ a los mensajes"

**Verificar**:
- [ ] Badge rojo
- [ ] NO cuenta como participante
- [ ] Disponibilidad sigue en 21

### 10.2 Actualizar Retiro

**Navegar a**: Admin Panel ‚Üí Retiros ‚Üí Editar

**Cambios de prueba**:
```
Precio: 1.200.000 (aumentar)
Capacidad: 30 (aumentar)
```

**Guardar y verificar**:
- [ ] Cambios reflejados
- [ ] Disponibilidad recalculada: 27 lugares

### 10.3 Eliminar Testimonio

**Navegar a**: Admin Panel ‚Üí Testimonios

**Seleccionar un testimonio** ‚Üí Eliminar

**Confirmar eliminaci√≥n**

**Verificar**:
- [ ] Desaparece del admin
- [ ] Desaparece de la landing

---

## ‚úÖ CHECKLIST FINAL DE FUNCIONALIDADES

### Frontend (Landing Page)
- [ ] Hero din√°mico con retiro activo
- [ ] Informaci√≥n de retiro completa
- [ ] Formulario de contacto funcional
- [ ] Testimonios destacados visibles
- [ ] Responsive en m√≥vil
- [ ] Scroll suave entre secciones
- [ ] Botones de WhatsApp y email funcionando

### Admin Panel
- [ ] Login funcional
- [ ] Dashboard con estad√≠sticas
- [ ] CRUD de retiros completo
- [ ] Gesti√≥n de leads con estados
- [ ] Actualizaci√≥n de disponibilidad autom√°tica
- [ ] Generaci√≥n de tokens
- [ ] Gesti√≥n de testimonios
- [ ] Filtros y b√∫squedas funcionando

### Backend (API)
- [ ] Autenticaci√≥n JWT
- [ ] CRUD de todas las entidades
- [ ] C√°lculo din√°mico de disponibilidad
- [ ] Validaciones de negocio
- [ ] Generaci√≥n de tokens √∫nicos
- [ ] Env√≠o de emails (si est√° configurado)
- [ ] Manejo de errores correcto

### Base de Datos
- [ ] Relaciones entre colecciones correctas
- [ ] √çndices funcionando
- [ ] Validaciones de schema
- [ ] Enums sincronizados
- [ ] TTL en tokens funcionando

---

## üêõ PROBLEMAS COMUNES Y SOLUCIONES

### Problema 1: No aparece el retiro en el Hero
**Soluci√≥n**:
- Verificar que `status: 'active'`
- Verificar que `showInHero: true`
- Verificar que las fechas sean futuras

### Problema 2: Lead no cuenta como participante
**Soluci√≥n**:
- Verificar que `status === 'confirmado'`
- Verificar que `paymentStatus === 'completo'`
- Ambos deben estar en ese estado

### Problema 3: Token no funciona
**Soluci√≥n**:
- Verificar que no est√© usado (`isUsed: false`)
- Verificar que no est√© expirado (`expiresAt > now`)
- Copiar token completo sin espacios

### Problema 4: Testimonio no aparece en landing
**Soluci√≥n**:
- Verificar que `isApproved: true`
- Verificar que `isFeatured: true`
- Ambos deben estar en true

### Problema 5: Emails no se env√≠an
**Soluci√≥n**:
- Verificar variables de entorno en `.env`
- Verificar configuraci√≥n de Nodemailer
- Los tokens se crean igual, solo falla el email

---

## üìù NOTAS FINALES

### Datos de Prueba Creados
```javascript
Retiro:
  ‚Ä¢ ID: (generado autom√°ticamente)
  ‚Ä¢ T√≠tulo: "Retiro de A√±o Nuevo 2026"
  ‚Ä¢ Fechas: 29/12/2025 - 02/01/2026
  ‚Ä¢ Precio: $1.111.111 ARS
  ‚Ä¢ Capacidad: 24 personas
  ‚Ä¢ Estado: active

Configuraci√≥n:
  ‚Ä¢ Email: holasoul.experiences@gmail.com
  ‚Ä¢ WhatsApp: +5493512345678
  ‚Ä¢ Facilitadora: Clarisa Soul
```

### Pr√≥ximos Pasos Sugeridos
1. ‚úÖ Probar en diferentes navegadores
2. ‚úÖ Probar en m√≥vil
3. ‚úÖ Verificar responsive design
4. ‚úÖ Probar con m√∫ltiples leads simult√°neos
5. ‚úÖ Verificar performance con muchos datos

---

## üéâ ¬°SISTEMA COMPLETAMENTE FUNCIONAL!

Si completaste todos los pasos, has probado:
- ‚úÖ Creaci√≥n de retiros
- ‚úÖ Gesti√≥n de leads
- ‚úÖ C√°lculo de disponibilidad
- ‚úÖ Generaci√≥n de tokens
- ‚úÖ Env√≠o de testimonios
- ‚úÖ Aprobaci√≥n y publicaci√≥n
- ‚úÖ Landing page din√°mica
- ‚úÖ Admin panel completo

**El sistema est√° listo para producci√≥n.** üöÄ
